title: POD数据类型
author: Jiahao Wu
tags:
  - C++
categories:
  - C++
  - STL标准库与泛型编程
date: 2021-03-13 19:45:00
---
# POS数据类型

阅读《STL源码剖析》的时候出现了POD数据类型一词，看到的时候非常迷惑，查询了不少资料后大致理解了，这里总结一下。  

POD全称Plain Old Data。字面意思，普通的，旧的数据类型。通俗的讲，一个类或结构体通过二进制拷贝后还能保持其数据不变，那么它就是一个POD类型。

## trival（平凡的）

trivial类型支持静态初始化。如果一个类型是拷贝不变的（trivially copyable），使用memcpy这种方式把它的数据从一个地方拷贝出来会得到相同的结果。   
C++标准把trivial（平凡的）类型定义如下：  
1. 平凡的复制构造函数  
2. 平凡的转移构造函数  
3. 平凡的赋值操作符  
4. 平凡的转移赋值操作符  
5. 平凡的析构函数  
6. 没有虚函数和虚基类。  

如何判断一个类是不是trival的呢？
```C++
std::is_trivial<T>::value
// 上述值为true则表示类型T是trival的
```


## standard-layout(标准布局)

C++标准中的是这样定义的：

1. 所有的非静态数据成员都符合标准布局或是引用的  
2. 没有虚函数和虚基类  
3. 非静态数据成员的访问控制必须是相同的  
4. 基类都符合标准布局  
5. 在派生类中没有非静态数据成员，且在基类中最多有一个基类拥有非静态数据成员，也就是说在整个的继承关系中，最多有1个基类有非静态数据成员（含0个）并且子类不能有非静态数据成员  
6. 相同基类类型的非静态数据成员不能作为第一个成员，也就是说在子类中的第一个非静态数据成员不能是父类。  

判断方式如下：  
```C++
std::is_standard_layout<B_1>::value
// 类似
```


## POD

当一个数据类型满足了trival(平凡)和 standard_layout(标准布局)，我们则认为它是一个POD数据。可以通过std::is_pod来判断一个类型是否为POD类型：  
```C++
std::is_pod<T>:value
```